<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dementia Memory Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f6f8;
  margin:0;
  padding:15px;
}
h2{text-align:center}
.card{
  background:white;
  padding:15px;
  margin-bottom:15px;
  border-radius:10px;
  box-shadow:0 0 10px rgba(0,0,0,0.1);
}
button{
  padding:10px;
  width:100%;
  background:#007bff;
  color:white;
  border:none;
  border-radius:6px;
  font-size:16px;
}
select,input{
  width:100%;
  padding:8px;
  margin:5px 0;
}
.alert{
  background:#ffcccc;
  padding:10px;
  border-radius:6px;
  margin-top:10px;
  color:#900;
}
canvas{width:100%}
</style>
</head>

<body>

<h2 id="title">Memory Assessment Test</h2>

<div class="card">
<select id="lang" onchange="changeLang()">
  <option value="en">English</option>
  <option value="kn">Kannada</option>
</select>
</div>

<div class="card" id="guardianCard">
<h3 id="gTitle">Guardian Details</h3>
<input id="gname" placeholder="Guardian Name">
<input id="gage" placeholder="Age">
<input id="gphone" placeholder="Phone Number">
<input id="gstate" placeholder="State">
<input id="gcountry" placeholder="Country">
<button onclick="saveGuardian()">Save Guardian</button>
</div>

<div class="card" id="testCard" style="display:none">
<h3 id="qTitle">Test Questions</h3>
<div id="questions"></div>
<button onclick="submitTest()">Submit Test</button>
</div>

<div class="card" id="resultCard" style="display:none">
<h3 id="rTitle">Result Analysis</h3>
<p id="scoreText"></p>
<canvas id="chart"></canvas>
<div id="alertBox"></div>
</div>

<script>
let language="en";

const text={
en:{
 title:"Memory Assessment Test",
 gTitle:"Guardian Details",
 qTitle:"Answer the following questions",
 rTitle:"Result Analysis"
},
kn:{
 title:"à²¸à³à²®à²°à²£à²¾ à²ªà²°à³€à²•à³à²·à³†",
 gTitle:"à²—à²¾à²°à³à²¡à²¿à²¯à²¨à³ à²µà²¿à²µà²°à²—à²³à³",
 qTitle:"à²ˆ à²ªà³à²°à²¶à³à²¨à³†à²—à²³à²¿à²—à³† à²‰à²¤à³à²¤à²°à²¿à²¸à²¿",
 rTitle:"à²«à²²à²¿à²¤à²¾à²‚à²¶ à²µà²¿à²¶à³à²²à³‡à²·à²£à³†"
}
};

const questions=[
 {q:{en:"What is your son's name?",kn:"à²¨à²¿à²®à³à²® à²®à²—à²¨ à²¹à³†à²¸à²°à³ à²à²¨à³?"},a:"ram"},
 {q:{en:"Which city do you live in?",kn:"à²¨à³€à²µà³ à²¯à²¾à²µ à²¨à²—à²°à²¦à²²à³à²²à²¿ à²µà²¾à²¸à²¿à²¸à³à²¤à³à²¤à³€à²°à²¿?"},a:"bengaluru"},
 {q:{en:"Identify this object: ðŸ•°",kn:"à²ˆ à²µà²¸à³à²¤à³à²µà²¨à³à²¨à³ à²—à³à²°à³à²¤à²¿à²¸à²¿: ðŸ•°"},a:"clock"},
 {q:{en:"What day comes after Monday?",kn:"à²¸à³‹à²®à²µà²¾à²°à²¦ à²¨à²‚à²¤à²° à²¯à²¾à²µ à²¦à²¿à²¨?"},a:"tuesday"},
 {q:{en:"What is 5 + 3?",kn:"5 + 3 à²Žà²·à³à²Ÿà³?"},a:"8"},
 {q:{en:"Which season is coldest?",kn:"à²…à²¤à³€ à²šà²³à²¿à²¯à²¾à²¦ à²‹à²¤à³?"},a:"winter"},
 {q:{en:"What animal says meow?",kn:"à²®à²¿à²¯à²¾à²µà³ à²Žà²¨à³à²¨à³à²µ à²ªà³à²°à²¾à²£à²¿?"},a:"cat"},
 {q:{en:"How many fingers in one hand?",kn:"à²’à²‚à²¦à³ à²•à³ˆà²¯à²²à³à²²à²¿ à²Žà²·à³à²Ÿà³ à²¬à³†à²°à²³à³à²—à²³à³?"},a:"5"},
 {q:{en:"What color is the sky?",kn:"à²†à²•à²¾à²¶à²¦ à²¬à²£à³à²£ à²à²¨à³?"},a:"blue"},
 {q:{en:"What is your country name?",kn:"à²¨à²¿à²®à³à²® à²¦à³‡à²¶à²¦ à²¹à³†à²¸à²°à³?"},a:"india"}
];

function changeLang(){
 language=document.getElementById("lang").value;
 document.getElementById("title").innerText=text[language].title;
 document.getElementById("gTitle").innerText=text[language].gTitle;
 document.getElementById("qTitle").innerText=text[language].qTitle;
 document.getElementById("rTitle").innerText=text[language].rTitle;
 loadQuestions();
}

function saveGuardian(){
 localStorage.setItem("guardian",JSON.stringify({
  name:gname.value,phone:gphone.value
 }));
 document.getElementById("testCard").style.display="block";
 loadQuestions();
}

function loadQuestions(){
 let qdiv=document.getElementById("questions");
 qdiv.innerHTML="";
 questions.forEach((x,i)=>{
  qdiv.innerHTML+=`
  <p>${i+1}. ${x.q[language]}</p>
  <input id="ans${i}">
  `;
 });
}

function submitTest(){
 let score=0;
 questions.forEach((x,i)=>{
  if(document.getElementById("ans"+i).value.toLowerCase()==x.a) score++;
 });

 let history=JSON.parse(localStorage.getItem("history")||"[]");
 history.push({date:new Date().toLocaleDateString(),score});
 localStorage.setItem("history",JSON.stringify(history));

 showResult(score,history);
}

function showResult(score,history){
 document.getElementById("resultCard").style.display="block";
 document.getElementById("scoreText").innerText="Score: "+score+"/10";

 if(history.length>=2){
  let diff=history[history.length-2].score-score;
  if(diff>=3){
   document.getElementById("alertBox").innerHTML=
   "<div class='alert'>âš  Sudden memory decline detected! Guardian alert recommended.</div>";
  }
 }
 drawChart(history);
}

function drawChart(data){
 let c=document.getElementById("chart");
 let ctx=c.getContext("2d");
 ctx.clearRect(0,0,c.width,c.height);
 let max=10;
 data.forEach((d,i)=>{
  ctx.fillRect(i*30,100-(d.score*10),20,d.score*10);
 });
}
</script>

</body>
</html>
